/* View criada para a análise do nome e telefone dos usuários que praticam karatê
*/

CREATE OR REPLACE VIEW vw_viewFoneUserKarate
AS 
SELECT usuario_telefone.telefone, usuario.nome from 
    (usuario_telefone JOIN usuario on (usuario.matricula = usuario_telefone.usuario) 
    JOIN inscricao on 
          (usuario.matricula = inscricao.matricula_usuario) 
          JOIN modalidade on 
              (inscricao.codigo_modalidade = modalidade.codigo_modalidade)) 
               where inscricao.codigo_modalidade = 
                    (SELECT modalidade.codigo_modalidade from modalidade 
                    where modalidade.nome = 'karate');

SELECT * FROM vw_viewFoneUserKarate;
